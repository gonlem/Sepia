extends basic-layout 

block main

    div(id='toolbar')
        div(id='toolbar-buttons')
            a(class='button' href='#new-signing-right-modal') Ajouter un droit de signature
            a(class='button' href='#import-signing-rights-modal') Importer des droits de signature
        div(id='toolbar-search-box')
            span üîç
            input(id='search-field' type='search')
            span(id='search-count') #{signingRights.length}

    div(class='content')
        table(class='sortable-table')
            thead
                tr
                    th(class='th-sort-desc') CBE du signataire
                    th SSIN du signataire
                    th Sujet du document
                    th Classification du document
                    th Alias du Certificat
            tbody
                if signingRights.length > 0
                    each signingRight in signingRights
                        tr(class='clickable-item searchable-item' data-link=('/sepia-admin/signing-rights/' + signingRight._id))
                            td=signingRight.signer_cbe
                            td=signingRight.signer_ssin
                            td=signingRight.document_subject
                            td=signingRight.document_classification
                            td=signingRight.certificate_alias
                else
                    tr
                        td(colspan='5') Aucun droit de signature trouv√©

    div(id='modals')
        div(id='new-signing-right-modal' class='modal')
            form(method='POST' action='/sepia-admin/signing-rights')
                h1 Nouveau droit de signature
                    a(class='button' href='#') ‚úñ
                label CBE du signataire
                    input(name='signer_cbe' type='text' size='10' required)
                label SSIN du signataire (optionnel)
                    input(name='signer_ssin' type='text' size='11')
                label Sujet du document
                    input(name='document_subject' type='text' size='20' required)
                label Classification du document
                    input(name='document_classification' type='text' size='20' required)
                label Alias du Certificat (optionnel)
                    input(name='certificate_alias' type='text')
                button(type='submit') Ajouter
        div(id='import-signing-rights-modal' class='modal')
            form(method='POST' enctype='multipart/form-data' action='/sepia-admin/signing-rights-upload')
                h1 Charger un fichier
                    a(class='button' href='#') ‚úñ
                span Avant de charger le fichier, veuillez v√©rifier les points suivants :
                span - La premi√®re ligne du fichier doit √™tre la ligne avec les intitul√©s des colonnes.
                span - Retirez toutes les lignes pr√©c√®demment import√©es (pour √©viter les doublons)
                label Fichier
                    input(id='csv' name='csv' type='file' accept='.csv')
                button(type='submit') Charger